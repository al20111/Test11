{% extends 'base.html' %}

{% block title %}シフト削除{% endblock %}
{% block h1 %}シフト削除{% endblock %}
{% block content %}

<script type="text/javascript">
  window.onload = function () {
    var today = new Date();
    today.setDate(today.getDate());
    var yyyy = today.getFullYear();
    var mm = ("0" + (today.getMonth() + 1)).slice(-2);
    var dd = ("0" + today.getDate()).slice(-2);
    document.getElementById("today").value = yyyy + '-' + mm + '-' + dd;
  }
</script>

<form action="{% url 'shift:delete_detail' %}" method="post">
  {% csrf_token %}
  <input type="date" id="today" name="date_field">
  <input type="submit" value="Search">
</form>

<br>

{% if shift_list %}
<table border="1">
  {% for shift in shift_list %}
  <tr>
    <td>{{ shift.date }}</td>
    <td>{{ shift.start_time }}</td>
    <td>{{ shift.end_time }}</td>
    <td>{{ shift.confirmed_flag }}</td>
    <td>
      <form method="post" action="{% url 'shift:deleteShift' shift.id %}">{% csrf_token %}
        <button class="btn" type="submit" onclick='return confirm("本当に削除しますか？");'>削除</button>
      </form>
    </td>
  </tr>
  {% endfor %}
</table>
{% else %}
{{ delete_text }}
{% endif %}

{% endblock content %}
